// File: sales_analyzer.ruchy
// Analyzes sales data from CSV file

println("=== Sales Data Analyzer ===")

// Read CSV data (simplified - in practice you'd use CSV parser)
let sales_data = [
    ["Date", "Product", "Amount", "Region"],
    ["2024-01-15", "Laptop", "1299", "North"],
    ["2024-01-16", "Mouse", "25", "South"], 
    ["2024-01-17", "Keyboard", "79", "North"],
    ["2024-01-18", "Laptop", "1299", "East"],
    ["2024-01-19", "Monitor", "399", "West"]
]

// Process data
let total_sales = 0
let product_counts = {}
let region_sales = {}

for row in sales_data[1..] {  // Skip header
    let product = row[1]
    let amount = row[2].to_f()
    let region = row[3]
    
    // Calculate totals
    total_sales += amount
    
    // Count products
    product_counts[product] = product_counts.get(product, 0) + 1
    
    // Sum by region
    region_sales[region] = region_sales.get(region, 0) + amount
}

// Display results
println(f"Total Sales: ${total_sales}")
println(f"Average Sale: ${total_sales / (sales_data.len() - 1)}")

println("\nTop Products:")
for product, count in product_counts.items() {
    println(f"  {product}: {count} sales")
}

println("\nSales by Region:")
for region, amount in region_sales.items() {
    println(f"  {region}: ${amount}")
}