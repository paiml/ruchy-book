// deploy.ruchy - One-command deployment
use std::deploy;

let config = DeployConfig {
    app: "my-app",
    environment: env::var("DEPLOY_ENV"),  // staging/production
    strategy: BlueGreen,
    health_check: "/health",
    rollback_on_failure: true
}

// Build and test
deploy::build()
    .test()
    .security_scan()
    .create_artifact()

// Deploy with zero downtime
let deployment = deploy::start(config)
    .provision_infrastructure()
    .deploy_new_version()
    .run_smoke_tests()
    .switch_traffic()
    .verify_metrics()

if deployment.is_healthy() {
    deployment.commit()
    println("✅ Deployment successful!")
} else {
    deployment.rollback()
    println("⚠️  Rolled back to previous version")
}